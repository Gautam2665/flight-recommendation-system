<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="https://cdn.jsdelivr.net/npm/remixicon@3.4.0/fonts/remixicon.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <link href="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.css" rel="stylesheet" />

    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
    <title>SkyScout | Find the Best & Cheapest Flights</title>
  </head>
  <script src="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      AOS.init({
        duration: 1800,        // slower for better visibility
        once: false,           // animate both ways
        easing: 'ease-out-cubic', // smooth and elegant
        mirror: true           // re-trigger on scroll-up
      });
    });
  </script>      
  <body>
    {% include 'navbar.html' %}
    
    <header class="section__container header__container" data-aos="fade-up">
      <h1 class="section__header" data-aos="fade-up" data-aos-delay="200">Find The Best & Cheapest Flights<br />Tailored Just For You</h1>
      <img src="{{ url_for('static', filename='header.jpg') }}" alt="header" data-aos="zoom-in">
    </header>

    <div class="search-box" data-aos="fade-up" data-aos-delay="800">
      <form action="/flight-details" method="GET" class="search-fields">
    
        <div class="field">
          <div class="swap-container">
            <div class="swap-field">
              <label>From</label>
              <input type="text" id="sourceInput" name="source" required>
            </div>
    
            <button type="button" class="swap-button" onclick="swapInputs()" aria-label="Swap origin and destination">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true">
                <path d="M.44 8.56a1.5 1.5 0 0 1 0-2.12l4.5-4.5a1.5 1.5 0 0 1 2.12 0l4.5 4.5a1.5 1.5 0 0 1-2.12 2.12L7.5 6.622V19.5a1.5 1.5 0 0 1-3 0V6.621l-1.94 1.94a1.5 1.5 0 0 1-2.12 0zm12 6.88a1.5 1.5 0 0 0 0 2.12l4.5 4.5a1.5 1.5 0 0 0 2.12 0l4.5-4.5a1.5 1.5 0 0 0-2.12-2.12l-1.94 1.939V4.5a1.5 1.5 0 0 0-3 0v12.879l-1.94-1.94a1.5 1.5 0 0 0-2.12 0z"></path>
              </svg>
            </button>
    
            <div class="swap-field">
              <label>To</label>
              <input type="text" id="destinationInput" name="destination" required>
            </div>
          </div>
        </div>

        <div class="field">
          <div class="field-label">Departure</div>
          <input type="text" name="date" class="field-value-input" placeholder="Select your date" id="departureDate" required>
        </div>  
              
    
        <div class="field">
          <div class="field-label">Class</div>
          <select name="class" class="field-value-input" required>
            <option value="Economy">Economy</option>
            <option value="Business">Business</option>
          </select>
        </div>
    
        <div class="field">
          <div class="field-label">Travellers</div>
          <input type="number" name="travellers" class="field-value-input" min="1" value="1" required>
        </div>
    
        <button type="submit" class="search-btn">Search</button>
      </form>
    </div>             

    <section class="section__container plan__container" data-aos="fade-up">
      <p class="subheader">SMART TRAVEL PLANNING</p>
      <h2 class="section__header" data-aos="fade-up" data-aos-delay="200">
        Get the Best Flights with Our Custom Algorithm
      </h2>      
      <p class="description">
        Our advanced algorithm analyzes your preferences and requirements to find the cheapest and most suitable flights for you.
      </p>
      <div class="plan__grid">
        <div class="plan__content" data-aos="fade-right" data-aos-delay="300">
          <span class="number animate__animated animate__bounceIn"><i class="ri-algorithm-line"></i></span>
          <h4>Smart Flight Matching</h4>
          <p>
            Our custom algorithm matches you with the best flights based on your budget, preferences, and travel requirements.
          </p>
          <span class="number animate__animated animate__bounceIn"><i class="ri-money-dollar-circle-line"></i></span>
          <h4>Cheapest Prices Guaranteed</h4>
          <p>
            We compare millions of flights to ensure you get the best deals and save money on every trip.
          </p>
          <span class="number animate__animated animate__bounceIn"><i class="ri-user-settings-line"></i></span>
          <h4>Personalized Recommendations</h4>
          <p>
            Get tailored flight suggestions that suit your travel style and needs.
          </p>
        </div>
        <div class="plan__image" data-aos="fade-left" data-aos-delay="500">
            <img src="{{ url_for('static', filename='plan-1.jpg') }}" alt="Plan 1">
            <img src="{{ url_for('static', filename='plan-2.jpg') }}" alt="Plan 2">
            <img src="{{ url_for('static', filename='plan-3.jpg') }}" alt="Plan 3">
        </div>
      </div>
    </section>

    <section class="memories" data-aos="fade-up">
      <div class="section__container memories__container">
        <div class="memories__header">
          <h2 class="section__header">
            Travel Smarter, Not Harder
          </h2>
          <button class="view__all">View All</button>
        </div>
        <div class="memories__grid">
          <div class="memories__card" data-aos="flip-up" data-aos-delay="300">
            <span><i class="ri-search-eye-line"></i></span>
            <h4>Find the Best Deals</h4>
            <p>
              Our algorithm scours the web to find the cheapest flights tailored to your needs.
            </p>
          </div>
          <div class="memories__card" data-aos="flip-up" data-aos-delay="300">
            <span><i class="ri-time-line"></i></span>
            <h4>Save Time</h4>
            <p>
              No more endless searching. We deliver the best options in seconds.
            </p>
          </div>
          <div class="memories__card" data-aos="flip-up" data-aos-delay="300">
            <span><i class="ri-heart-line"></i></span>
            <h4>Travel Your Way</h4>
            <p>
              Customize your search to find flights that match your preferences and budget.
            </p>
          </div>
        </div>
      </div>
    </section>

    <section class="section__container lounge__container">
      <div class="lounge__image" data-aos="fade-right" data-aos-delay="200">
        <img src="{{ url_for('static', filename='lounge-1.jpg') }}" alt="lounge 1">
        <img src="{{ url_for('static', filename='lounge-2.jpg') }}" alt="lounge 2">
      </div>
      <div class="lounge__content" data-aos="fade-left" data-aos-delay="500">
        <h2 class="section__header">Why Choose SkyScout?</h2>
        <div class="lounge__grid">
          <div class="lounge__details">
            <h4><i class="ri-star-line"></i> Best Prices</h4>
            <p>
              We guarantee the cheapest flights by comparing prices across multiple airlines and platforms.
            </p>
          </div>
          <div class="lounge__details">
            <h4><i class="ri-user-voice-line"></i> Personalized Service</h4>
            <p>
              Our algorithm tailors flight options to your specific needs and preferences.
            </p>
          </div>
          <div class="lounge__details">
            <h4><i class="ri-shield-check-line"></i> Safe & Secure</h4>
            <p>
              Your data and transactions are protected with the highest security standards.
            </p>
          </div>
          <div class="lounge__details">
            <h4><i class="ri-customer-service-2-line"></i> 24/7 Support</h4>
            <p>
              Our team is always available to assist you with any queries or issues.
            </p>
          </div>
        </div>
      </div>
    </section>

    <section class="section__container travellers__container" data-aos="fade-up">
      <h2 class="section__header">What Our Users Say</h2>
      <div class="travellers__grid">
        <div class="travellers__card" data-aos="zoom-in" data-aos-delay="300">
            <img src="{{ url_for('static', filename='traveller-1.jpg') }}" alt="traveller">
          <div class="travellers__card__content">
            <img src="{{ url_for('static', filename='client-1.jpg') }}" alt="client">
            <h4>Emily Johnson</h4>
            <p>"SkyScout saved me hundreds on my trip to Dubai!"</p>
          </div>
        </div>
        <div class="travellers__card" data-aos="zoom-in" data-aos-delay="300">
            <img src="{{ url_for('static', filename='traveller-2.jpg') }}" alt="traveller">
          <div class="travellers__card__content">
            <img src="{{ url_for('static', filename='client-2.jpg') }}" alt="client">
            <h4>David Smith</h4>
            <p>"The personalized recommendations were spot on!"</p>
          </div>
        </div>
        <div class="travellers__card" data-aos="zoom-in" data-aos-delay="300">
            <img src="{{ url_for('static', filename='traveller-3.jpg') }}" alt="traveller">
          <div class="travellers__card__content">
            <img src="{{ url_for('static', filename='client-3.jpg') }}" alt="client">
            <h4>Olivia Brown</h4>
            <p>"I found the perfect flight in minutes. Highly recommend!"</p>
          </div>
        </div>
        <div class="travellers__card" data-aos="zoom-in" data-aos-delay="300">
            <img src="{{ url_for('static', filename='traveller-4.jpg') }}" alt="traveller">
          <div class="travellers__card__content">
            <img src="{{ url_for('static', filename='client-4.jpg') }}" alt="client">
            <h4>Daniel Taylor</h4>
            <p>"The cheapest flights I’ve ever booked. Amazing service!"</p>
          </div>
        </div>
      </div>
    </section>

    <section class="subscribe" data-aos="fade-up" data-aos-delay="400">
      <div class="section__container subscribe__container">
        <h2 class="section__header">Subscribe for Exclusive Deals</h2>
        <form class="subscribe__form">
          <input type="text" placeholder="Enter your email here" />
          <button class="btn">Subscribe</button>
        </form>
      </div>
    </section>

    <footer class="footer" data-aos="fade-up" data-aos-delay="600">
      <div class="section__container footer__container">
        <div class="footer__col">
          <h3>SkyScout</h3>
          <p>
            Your trusted partner in finding the best and cheapest flights. We use advanced algorithms to ensure you get the most value for your money.
          </p>
          <p>
            Travel smarter, save more, and explore the world with SkyScout.
          </p>
        </div>
        <div class="footer__col">
          <h4>INFORMATION</h4>
          <p>Home</p>
          <p>About</p>
          <p>Deals</p>
          <p>Seats</p>
          <p>Destinations</p>
        </div>
        <div class="footer__col">
          <h4>CONTACT</h4>
          <p>Support</p>
          <p>Media</p>
          <p>Socials</p>
        </div>
      </div>
      <div class="section__container footer__bar">
        <p>Copyright © 2023 SkyScout All rights reserved.</p>
        <div class="socials">
          <span><i class="ri-facebook-fill"></i></span>
          <span><i class="ri-twitter-fill"></i></span>
          <span><i class="ri-instagram-line"></i></span>
          <span><i class="ri-youtube-fill"></i></span>
        </div>
      </div>
    </footer>
    <script>
      function swapInputs() {
        const sourceInput = document.getElementById('sourceInput');
        const destinationInput = document.getElementById('destinationInput');
    
        const temp = sourceInput.value;
        sourceInput.value = destinationInput.value;
        destinationInput.value = temp;
      }

      function attachCustomAutocomplete(inputId) {
        const input = document.getElementById(inputId);
        const wrapper = input.parentElement;
        let suggestionBox = document.createElement('div');
        suggestionBox.className = "autocomplete-suggestions";
        wrapper.style.position = "relative";
        wrapper.appendChild(suggestionBox);
      
        input.addEventListener('input', async function() {
            const query = this.value.trim();
            suggestionBox.innerHTML = '';
            if (!query) return;
        
            const response = await fetch(`/suggest-airport?q=${encodeURIComponent(query)}`);
            const suggestions = await response.json();
        
            suggestions.forEach(s => {
                const div = document.createElement('div');
                div.className = "autocomplete-suggestion";
            
                // Show s.label in the dropdown
                div.innerHTML = `
                  <span class="suggestion-icon">✈️</span>
                  <div class="suggestion-text">
                    <div class="suggestion-city">${s.label}</div>
                  </div>
                `;
            
                // When clicked, set s.label in input, or s.value if you prefer code
                div.onclick = () => {
                    input.value = s.label;  // Show full 'Bangalore (BLR)' to user
                    suggestionBox.innerHTML = '';
                };
              
                suggestionBox.appendChild(div);
            });
        });
      
        document.addEventListener('click', function(e) {
            if (!wrapper.contains(e.target)) {
                suggestionBox.innerHTML = '';
            }
        });
    }  
    
    attachCustomAutocomplete("sourceInput");
    attachCustomAutocomplete("destinationInput");

    document.addEventListener('DOMContentLoaded', function () {
      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            const target = entry.target;
            const animation = target.dataset.animate || 'animate__fadeInUp';
            target.classList.remove('hidden-on-load');
            target.classList.add('animate__animated', animation);
            observer.unobserve(target); // Only animate once
          }
        });
      }, {
        threshold: 0.2 // Trigger when 20% of the element is visible
      });
  
      document.querySelectorAll('.hidden-on-load').forEach(elem => {
        observer.observe(elem);
      });
    });
    
    </script>
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script>
      document.addEventListener('DOMContentLoaded', function() {
        flatpickr("#departureDate", {
          dateFormat: "Y-m-d", // Format the date as YYYY-MM-DD
          minDate: "today", // Ensure the user can't pick a past date
          theme: "material_blue", // Use a material design theme
          mode: "single", // Single date selection (change to "range" for date ranges)
          disableMobile: true, // Disable the mobile view to keep the desktop style
        });
      });
    </script>
    
  </body>
</html>